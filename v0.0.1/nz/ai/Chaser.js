(function(){var t,e,n,r;t="undefined"!=typeof window&&null!==window?window:global,e=t.nz=null!=(n=t.nz)?n:{},t=void 0,e.ai=null!=(r=e.ai)?r:{},e.ai.Chaser=function(){function t(){this.defaultAI=new e.ai.Default,this.ruleAI=new e.ai.Rule(this),this.rule({cond:function(t){return t.setFriendsAndTargets(),t.setNearTarget(),!1}}),this.rule({cond:function(t){var e;return e=this.calcSlidePosition({target:t.target,character:t.character,length:2}),t.checkMovePosition(e)&&t.distance<=4?!0:!1},setup:function(t){var e;return e=this.calcSlidePosition({target:t.target,character:t.character,length:2}),t.setAttackCommand(),t.setMoveCommand({target:e}),!0}}),this.rule({cond:function(t){return!0},setup:function(t){return t.setMoveCommand({target:{mapx:6,mapy:6}}),!0}})}return t.prototype.setupBattlePosition=function(t){return this.defaultAI.setupBattlePosition(t)},t.prototype.setupAction=function(t){return this.ruleAI.setupAction(t)},t.prototype.rule=function(t){return this.ruleAI.add(t)},t.prototype.calcSlidePosition=function(t){var n,r,a,i,o,s,c,u,l,d;return d=t.target,r=t.character,o=t.length,s=32*o,l=tm.geom.Vector2().setObject(e.utils.mapxy2screenxy(d)),u=tm.geom.Vector2().setObject(e.utils.mapxy2screenxy(r)),a=u.distance(l),c=u.sub(l).toAngle(),c+=s/a,i=tm.geom.Vector2().setRadian(c,a).add(l),n=e.utils.screenxy2mapxy(i)},t}(),e.system.addAI("Chaser",new e.ai.Chaser)}).call(this);
//# sourceMappingURL=../../nz/ai/Chaser.js.map